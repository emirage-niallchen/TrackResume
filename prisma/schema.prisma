generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Admin {
  id          String          @id
  username    String          @unique
  name        String?
  email       String?         @unique
  password    String
  description String
  avatar      String?
  createdAt   DateTime        @default(now())
  updatedAt   DateTime
  background  String?
  endpoint    String?
  language    ContentLanguage @default(zh)
}

model CallMe {
  id          String          @id
  label       String
  type        String
  iconName    String
  value       String
  href        String?
  order       Int             @default(0)
  isPublished Boolean         @default(false)
  createdAt   DateTime        @default(now())
  updatedAt   DateTime
  language    ContentLanguage @default(zh)
}

model CustomField {
  id          String          @id
  label       String
  value       String
  type        String
  description String?
  order       Int             @default(0)
  isPublished Boolean         @default(false)
  createdAt   DateTime        @default(now())
  updatedAt   DateTime
  language    ContentLanguage @default(zh)
}

model File {
  id          String          @id
  name        String
  path        String
  type        String
  size        Int
  isPublished Boolean         @default(false)
  createdAt   DateTime        @default(now())
  updatedAt   DateTime
  language    ContentLanguage @default(zh)
  FileTag     FileTag[]
}

model FileTag {
  id        String   @id
  fileId    String
  tagId     String
  createdAt DateTime @default(now())
  File      File     @relation(fields: [fileId], references: [id], onDelete: Cascade)
  Tag       Tag      @relation(fields: [tagId], references: [id], onDelete: Cascade)

  @@unique([fileId, tagId])
}

model Inbox {
  id          String   @id
  type        String
  value       String
  description String?
  isRead      Boolean  @default(false)
  createdAt   DateTime @default(now())
}

model Link {
  id          String          @id
  type        String
  content     String
  description String
  createdAt   DateTime        @default(now())
  updatedAt   DateTime
  language    ContentLanguage @default(zh)
}

model Location {
  id          String          @id
  latitude    Float
  longitude   Float
  address     String
  description String
  createdAt   DateTime        @default(now())
  updatedAt   DateTime
  language    ContentLanguage @default(zh)
}

model Page {
  id          String          @id
  slug        String
  title       String
  content     String
  path        String
  isPublished Boolean         @default(false)
  metadata    String?
  order       Int             @default(0)
  parentId    String?
  createdAt   DateTime        @default(now())
  updatedAt   DateTime
  language    ContentLanguage @default(zh)

  @@unique([slug, language])
}

model Project {
  id           String          @id
  name         String
  jobRole      String?
  jobTech      String?
  startTime    DateTime?
  endTime      DateTime?
  description  String
  detail       String?
  order        Int             @default(0)
  isPublished  Boolean         @default(false)
  createdAt    DateTime        @default(now())
  updatedAt    DateTime
  language     ContentLanguage @default(zh)
  ProjectImage ProjectImage[]
  ProjectLink  ProjectLink[]
  ProjectTag   ProjectTag[]
}

model ProjectImage {
  id        String          @id
  path      String
  alt       String?
  projectId String
  createdAt DateTime        @default(now())
  updatedAt DateTime
  language  ContentLanguage @default(zh)
  Project   Project         @relation(fields: [projectId], references: [id], onDelete: Cascade)
}

model ProjectLink {
  id        String          @id
  label     String
  url       String
  order     Int             @default(0)
  projectId String
  createdAt DateTime        @default(now())
  updatedAt DateTime
  language  ContentLanguage @default(zh)
  Project   Project         @relation(fields: [projectId], references: [id], onDelete: Cascade)
}

model ProjectTag {
  id        String   @id
  projectId String
  tagId     String
  createdAt DateTime @default(now())
  Project   Project  @relation(fields: [projectId], references: [id], onDelete: Cascade)
  Tag       Tag      @relation(fields: [tagId], references: [id], onDelete: Cascade)

  @@unique([projectId, tagId])
}

model Resume {
  id           String          @id
  name         String
  description  String
  startTime    DateTime
  endTime      DateTime?
  location     String?
  title        String?
  organization String?
  highlights   String?
  order        Int             @default(0)
  isPublished  Boolean         @default(false)
  createdAt    DateTime        @default(now())
  updatedAt    DateTime
  language     ContentLanguage @default(zh)
  ResumeTag    ResumeTag[]
}

model ResumeSection {
  id          String          @id
  name        String
  label       String
  description String?
  type        String
  component   String
  isEnabled   Boolean         @default(true)
  isPublished Boolean         @default(false)
  order       Int             @default(0)
  config      String?
  createdAt   DateTime        @default(now())
  updatedAt   DateTime
  language    ContentLanguage @default(zh)

  @@unique([name, language])
}

model ResumeTag {
  id        String   @id
  resumeId  String
  tagId     String
  createdAt DateTime @default(now())
  Resume    Resume   @relation(fields: [resumeId], references: [id], onDelete: Cascade)
  Tag       Tag      @relation(fields: [tagId], references: [id], onDelete: Cascade)

  @@unique([resumeId, tagId])
}

model Settings {
  id           String          @id
  websiteTitle String?
  favicon      String?
  createdAt    DateTime        @default(now())
  updatedAt    DateTime
  language     ContentLanguage @default(zh)
}

model Tag {
  id          String          @id
  name        String
  description String?
  color       String
  order       Int             @default(0)
  isPublished Boolean         @default(false)
  createdAt   DateTime        @default(now())
  updatedAt   DateTime
  language    ContentLanguage @default(zh)
  FileTag     FileTag[]
  ProjectTag  ProjectTag[]
  ResumeTag   ResumeTag[]
  TechTag     TechTag[]

  @@unique([name, language])
}

model Tech {
  id          String          @id
  name        String
  description String
  icon        String?
  link        String?
  bgColor     String
  order       Int             @default(0)
  isPublished Boolean         @default(false)
  createdAt   DateTime        @default(now())
  updatedAt   DateTime
  language    ContentLanguage @default(zh)
  TechTag     TechTag[]

  @@unique([name, language])
}

model TechTag {
  id        String   @id
  techId    String
  tagId     String
  createdAt DateTime @default(now())
  Tag       Tag      @relation(fields: [tagId], references: [id], onDelete: Cascade)
  Tech      Tech     @relation(fields: [techId], references: [id], onDelete: Cascade)

  @@unique([techId, tagId])
}

enum ContentLanguage {
  zh
  en
}
